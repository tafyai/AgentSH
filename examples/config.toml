# agentsh configuration example
# Copy to ~/.aishell/config.toml and customize

# AI Provider Settings
[ai]
# Provider: openai, anthropic, azure, local
provider = "openai"

# Model to use
model = "gpt-4"

# API endpoint
endpoint = "https://api.openai.com/v1/chat/completions"

# Environment variable containing your API key
api_key_env = "OPENAI_API_KEY"

# Maximum tokens in response
max_tokens = 2048

# Request timeout in seconds
timeout = 30

# Temperature (0.0 - 2.0, lower = more deterministic)
temperature = 0.7

# Mode Settings
[mode]
# Default mode: off, assist, auto
default = "assist"

# Shell to use (defaults to $SHELL)
# shell = "/bin/zsh"

# Shell arguments
shell_args = ["-l"]

# Safety Settings
[safety]
# Require confirmation for destructive commands (rm -rf, mkfs, etc.)
require_confirmation_for_destructive = true

# Require confirmation for sudo commands
require_confirmation_for_sudo = true

# Allow AI to execute sudo commands after confirmation
# If false, sudo commands are shown but must be run manually
allow_ai_to_execute_sudo = false

# Log all AI-generated commands
log_ai_generated_commands = true

# Log file path
log_path = "~/.aishell/logs/commands.log"

# Redact potential secrets from logs
redact_secrets = true

# Commands that are always blocked (regex patterns)
blocked_patterns = [
    "rm\\s+-rf\\s+/\\s*$",
    "rm\\s+-rf\\s+/\\*",
    "dd\\s+.*of=/dev/sd[a-z]\\s*$",
    "mkfs\\.\\S+\\s+/dev/sd[a-z]\\s*$",
]

# Paths requiring extra confirmation
protected_paths = [
    "/etc/passwd",
    "/etc/shadow",
    "/etc/sudoers",
    "~/.ssh/authorized_keys",
]

# UI Settings
[ui]
# Show plan before execution
show_plan_before_execution = true

# Show step numbers
show_step_numbers = true

# Prompt format (variables: {user}, {host}, {cwd}, {mode})
prompt = "{user}@{host}:{cwd} [{mode}]$ "

# Enable colors
color = true

# Spinner style: dots, line, arrow
spinner = "dots"

# Mode indicators
[ui.mode_indicators]
off = "shell"
assist = "ai:assist"
auto = "ai:auto"

# Color scheme
[ui.colors]
prompt_user = "green"
prompt_host = "blue"
prompt_cwd = "cyan"
ai_plan = "yellow"
ai_command = "white"
ai_warning = "red"
ai_success = "green"

# Context Settings
[context]
# Files to include in AI context
include_files = [
    "README.md",
    "Makefile",
    "docker-compose.yml",
    "package.json",
    "Cargo.toml",
]

# Patterns to exclude
exclude_patterns = [
    "*.log",
    "node_modules/*",
    "target/*",
    ".git/*",
]

# Maximum file size to include (bytes)
max_file_size = 102400

# Maximum total context size (bytes)
max_context_size = 524288

# Number of history lines to include
history_lines = 20

# Domain hint for AI (helps with specialized suggestions)
# domain_hint = "kubernetes"

# History Settings
[history]
enabled = true
file = "~/.aishell/history"
max_entries = 10000
share_with_shell = true
ignore_space = true

# Keybindings
[keys]
ai_mode = "Alt-a"
toggle_assist = "Alt-m"
ai_help = "Alt-h"
cancel = "Ctrl-c"
accept = "Enter"
edit = "e"
reject = "n"

# Plugin Settings
[plugins]
enabled = true
directory = "~/.aishell/plugins"
auto_load = true
timeout = 30
